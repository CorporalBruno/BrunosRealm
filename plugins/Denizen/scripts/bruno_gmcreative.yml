gmcreative:
  type: command
  debug: false
  name: gmc
  usage: "/gmc [playername]"
  description: Creative Gamemode command
  aliases: 
  - gm1
  - creative
  permission: bruno.gamemode
  permission message: <&5>Zeus<&f> Talk to the boss, you can't use this command.
  script:
  - if <player.world.name.contains[wild]> {
    - narrate "<&5>Zeus<&f> Nah. Try again mate. <script.yaml_key[usage]>"
    - queue clear
    }
  - choose <context.args.size>:
    - case 0:
      - note <player.inventory> as:<player.name>_<player.gamemode>
      - wait 1t
      - flag <player> e_<player.gamemode>:<player.equipment>
      - wait 1t
      - inventory clear d:<player.inventory>
      - wait 1t 
      - inventory set d:<player.inventory> o:in@<player.name>_CREATIVE
      - wait 1t
      - adjust <player> 'equipment:<player.flag[e_creative]>'
      - wait 1t
      - narrate "<&5>Hermes<&f> Inventory saved and switched."
      - adjust <player> 'gamemode:CREATIVE'
    - case 1:
      - define target p@<c.args.get[1]>
      - define target_name <c.args.get[1]>
      - choose <def[target_name]>:
        - case <player.name>:
          - note <player.inventory> as:<player.name>_<player.gamemode>
          - wait 1t
          - flag <player> e_<player.gamemode>:<player.equipment>
          - wait 1t
          - inventory clear d:<player.inventory>
          - wait 1t 
          - inventory set d:<player.inventory> o:in@<player.name>_CREATIVE
          - wait 1t
          - adjust <player> 'equipment:<player.flag[e_creative]>'
          - wait 1t
          - narrate "<&5>Hermes<&f> Inventory saved and switched."
          - adjust <player> 'gamemode:CREATIVE'
        - default:
          - choose <server.list_online_players.formatted.contains[%target_name%]>:
            - case true:
              - narrate "<&5>Hermes<&f> Saving inventory and swapping inventory. It may be a good idea clear your inventory before swapping gamemodes and notify anyone else involved in the situation."
              - note <def[target].inventory> as:<def[target_name]>_<def[target].gamemode>
              - wait 1t
              - flag <def[target]> e_<def[target].gamemode>:<def[target].equipment>
              - wait 1t
              - inventory clear d:<def[target].inventory>
              - wait 1t
              - inventory set d:<def[target].inventory> o:in@<def[target_name]>_CREATIVE
              - wait 1t
              - adjust <def[target]> 'equipment:<def[target].flag[e_creative]>'
              - wait 1t
              - narrate "<&5>Hermes<&f> Inventory saved and switched."
              - adjust <def[target]> 'gamemode:CREATIVE'
            - case help:
              - narrate "<&5>Zeus<&f> <script.yaml_key[usage]>"
            - default:
              - narrate "<&5>Zeus<&f> Please choose a player that is online."
    - default:
      - narrate "<&5>Zeus<&f> Nah. Try again mate. <script.yaml_key[usage]>"