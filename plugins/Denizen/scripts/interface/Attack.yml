CUI_Attack:
  slots:
  - '[i@thin_glass[display_name= ;lore=<&d>Choose Yes Or No please.]]
    [i@thin_glass[display_name= ;lore=<&d>Choose Yes Or No please.]]
    [i@lime_clay[display_name=<&a>YES]]
    [i@thin_glass[display_name= ;lore=<&d>Choose Yes Or No please.]]
    [i@thin_glass[display_name= ;lore=<&d>Choose Yes Or No please.]]
    [i@thin_glass[display_name= ;lore=<&d>Choose Yes Or No please.]]
    [i@red_clay[display_name=<&c>NO]]
    [i@thin_glass[display_name= ;lore=<&d>Choose Yes Or No please.]]
    [i@thin_glass[display_name= ;lore=<&d>Choose Yes Or No please.]]'
  debug: false
  size: 9
  type: inventory
  inventory: CHEST
  title: Attack this player?
  scripts:
    '1':
      left:
      - Queue Clear
    '2':
      left:
      - Queue Clear
    '3':
      left:
      - narrate "<&5>Zeus<&f><&e> Your <RED><BOLD>inventory will be lost<&e> if you die during a clan battle."
      - inventory close
      - choose <player.gamemode.id>:
        - case 0:
          - define attacker "<player>"
          - define battle_claim_id "<player.location.griefprevention.claim.id>"
          - define defender "<gpclaim@%battle_claim_id%.owner>"
          - execute as_player "gms <player.name>"
          - flag <player> trespassing
          - narrate "<&5>Zeus<&f> Preparing the battlefield."
          - wait 1t
          - flag <def[attacker]> attacker:true
          - wait 1t
          - flag <def[attacker]> attacking:<def[defender]>
          - wait 1t
          - flag <def[defender]> defender:true
          - wait 1t
          - flag <def[defender]> defending:<def[attacker]>
          - wait 1t
          - flag server %battle_claim_id%_%attacker%_btime_start:<server.current_time_millis>
          - wait 1t
          - narrate "%battle_claim_id%_%attacker%_btime_start:<server.current_time_millis>"
          - wait 1t
          - flag server %battle_claim_id%FROM:<def[attacker]>
          - wait 1t
          - flag server %defender%DEFENDS:%battle_claim_id%
          - wait 1t
          - define bclaim_center_block <gpclaim@%battle_claim_id%.cuboid.center>
          - announce to_ops "<RED><BOLD>%bclaim_center_block%"
          - schematic create name:%battle_claim_id%CLAIM <gpclaim@%battle_claim_id%.cuboid> %bclaim_center_block%
          - wait 2s
          - schematic save name:%battle_claim_id%CLAIM
          - wait 2s
          - execute as_op "siege <def[defender].name>"
          - wait 1t
          - narrate "<&5>Mars<&f> Its On Like Donkey Kong."
          - announce "<&5>Mars<&f> <def[attacker].name> Has begun a siege against <def[defender].name>."
          - schematic unload name:%battle_claim_id%CLAIM
        - default:
          - narrate "<&5>Zeus<&f> You must be able to take damage as well."
    '4':
      left:
      - Queue Clear
    '5':
      left:
      - Queue Clear
    '6':
      left:
      - Queue Clear
    '7':
      left:
      - inventory close
      - flag <player> attacker:false
    '8':
      left:
      - Queue Clear
    '9':
      left:
      - Queue Clear
